{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/frankie/sparta/hanghae_react/magazine_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/frankie/sparta/hanghae_react/magazine_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject;import React from\"react\";import{Text,Grid,Button}from\"../elements\";import styled from\"styled-components\";// 분홍 하트, 회색 하트 이미지 가져오기\nimport heart_pink from\"../shared/heart_pink.png\";import heart_gray from\"../shared/heart_gray.png\";import{history}from\"../redux/configureStore\";import{useDispatch,useSelector}from\"react-redux\";import{actionCreators as likeActions}from\"../redux/modules/like\";// 하트 버튼은 일단 모양새만 잡아줄거예요!\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HeartButton=function HeartButton(props){var dispatch=useDispatch();var like_list=useSelector(function(state){return state.like.list;});var user_info=useSelector(function(state){return state.user.user;});var _onClick=props._onClick,_onChange=props._onChange,like=props.like,post_id=props.post_id;var styles={};React.useEffect(function(){var _like_list$post_id;if((_like_list$post_id=like_list[post_id])===null||_like_list$post_id===void 0?void 0:_like_list$post_id.includes(user_info===null||user_info===void 0?void 0:user_info.uid)){setLike(true);}else{setLike(false);}});var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),islike=_React$useState2[0],setLike=_React$useState2[1];var updateHeart=function updateHeart(){var _like_list$post_id2,_like_list$post_id3;if(!user_info){return/*#__PURE__*/_jsxs(Grid,{margin:\"100px 0px\",padding:\"16px\",center:true,children:[/*#__PURE__*/_jsx(Text,{size:\"32px\",bold:true,children:\"\\uC557 \\uC7A0\\uAE50!\"}),/*#__PURE__*/_jsx(Text,{size:\"16px\",children:\"\\uB85C\\uADF8\\uC778 \\uD6C4\\uC5D0\\uB9CC \\uAE00\\uC744 \\uC4F8 \\uC218 \\uC788\\uC5B4\\uC694!\"}),/*#__PURE__*/_jsx(Button,{_onClick:function _onClick(){history.replace(\"/login\");},children:\"\\uB85C\\uADF8\\uC778 \\uD558\\uB7EC \\uAC00\\uAE30!\"})]});}else if(!((_like_list$post_id2=like_list[post_id])===null||_like_list$post_id2===void 0?void 0:_like_list$post_id2.includes(user_info.uid))){dispatch(likeActions.addLikeFB(post_id));}else if((_like_list$post_id3=like_list[post_id])===null||_like_list$post_id3===void 0?void 0:_like_list$post_id3.includes(user_info.uid)){dispatch(likeActions.unLikeFB(post_id));}};return/*#__PURE__*/_jsx(\"div\",{onClick:updateHeart,children:islike?/*#__PURE__*/_jsx(Heart,{icon_url:heart_pink}):/*#__PURE__*/_jsx(Heart,{icon_url:heart_gray})});};HeartButton.defaultProps={_onClick:function _onClick(){},_onChange:function _onChange(){},like:false};var Heart=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 30px;\\n  height: 30px;\\n  display: flex;\\n  background: url(\",\");\\n  background-size: cover;\\n  cursor: pointer;\\n\"])),function(props){return props.icon_url;});export default HeartButton;","map":{"version":3,"sources":["/Users/frankie/sparta/hanghae_react/magazine_test/src/components/HeartButton.js"],"names":["React","Text","Grid","Button","styled","heart_pink","heart_gray","history","useDispatch","useSelector","actionCreators","likeActions","HeartButton","props","dispatch","like_list","state","like","list","user_info","user","_onClick","_onChange","post_id","styles","useEffect","includes","uid","setLike","useState","islike","updateHeart","replace","addLikeFB","unLikeFB","defaultProps","Heart","div","icon_url"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Text, Grid, Button } from \"../elements\";\nimport styled from \"styled-components\";\n\n// 분홍 하트, 회색 하트 이미지 가져오기\nimport heart_pink from \"../shared/heart_pink.png\";\nimport heart_gray from \"../shared/heart_gray.png\";\n\nimport { history } from \"../redux/configureStore\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actionCreators as likeActions } from \"../redux/modules/like\";\n\n// 하트 버튼은 일단 모양새만 잡아줄거예요!\nconst HeartButton = (props) => {\n  const dispatch = useDispatch();\n\n  const like_list = useSelector((state) => state.like.list);\n  const user_info = useSelector((state) => state.user.user);\n\n  const { _onClick, _onChange, like, post_id } = props;\n  const styles = {}\n\n  React.useEffect(() => {\n    if (like_list[post_id]?.includes(user_info?.uid)) {\n      setLike(true);\n    } else {\n      setLike(false);\n    }\n  });\n\n  const [islike, setLike] = React.useState(false);\n  const updateHeart = () => {\n    if (!user_info) {\n      return (\n        <Grid margin=\"100px 0px\" padding=\"16px\" center>\n          <Text size=\"32px\" bold>\n            앗 잠깐!\n          </Text>\n          <Text size=\"16px\">로그인 후에만 글을 쓸 수 있어요!</Text>\n          <Button\n            _onClick={() => {\n              history.replace(\"/login\");\n            }}\n          >\n            로그인 하러 가기!\n          </Button>\n        </Grid>\n      );\n    } else if (!like_list[post_id]?.includes(user_info.uid)) {\n      dispatch(likeActions.addLikeFB(post_id));\n    } else if (like_list[post_id]?.includes(user_info.uid)) {\n      dispatch(likeActions.unLikeFB(post_id));\n    }\n  };\n\n  return (\n    <div onClick={updateHeart}>\n      {/* <Heart icon_url={like? heart_pink : heart_gray} onClick={_onClick}></Heart> */}\n      {islike? <Heart icon_url={heart_pink}/> : <Heart icon_url={heart_gray}/> }\n    </div>\n  );\n};\nHeartButton.defaultProps = {\n  _onClick: () => {},\n  _onChange: () => {},\n  like: false,\n};\nconst Heart = styled.div`\n  width: 30px;\n  height: 30px;\n  display: flex;\n  background: url(${(props) => props.icon_url});\n  background-size: cover;\n  cursor: pointer;\n`;\n\nexport default HeartButton;\n"]},"metadata":{},"sourceType":"module"}